<html>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.3.7/shaka-player.compiled.debug.min.js" integrity="sha512-P4kVWv8FgEmyMi1dklB5ngGFKcAamysT0b/4EyvooDFGyee7SpVPN+tQb+8ZRWF3L17EFv4fo646j43GWd2xXw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>

<div>
  <video id="video" width="1200" height="720" style="background-color:black" crossorigin="anonymous" autoplay="" controls="">
  </video>
</div>
<script>
	var app = function() {};

	app.video = null;
	app.player = null;

	app.init = function() {
		shaka.polyfill.installAll();

		shaka.Player.probeSupport().then(function(support) {
			app.initPlayer();
			app.loadStream();
		});
	}

	app.initPlayer = function() {
		app.video = /** @type {!HTMLVideoElement} */ document.getElementById('video');
		app.player = new shaka.Player(app.video);

		window.player = app.player;

		app.player.addEventListener('error', app.onPlayerError, false);

		var fields = location.search.split('?').pop();
		fields = fields ? fields.split(';') : [];
		var params = {};
		for (var i = 0; i < fields.length; ++i) {
		var kv = fields[i].split('=');
		params[kv[0]] = kv[1];
		}

		if ('debug' in params && shaka.log) {
		shaka.log.setLevel(shaka.log.Level.DEBUG);
		}
		if ('v' in params && shaka.log) {
		shaka.log.setLevel(shaka.log.Level.V1);
		}
	};

	app.loadStream = function() {
		var mediaUrl = 'https://linear313-it-dash1-prd.selector.skycdn.it/016a/32477/FHD/skyuno/master.mpd';
	  
		let clearKeys = {};

		clearKeys['003610b8556000936e48061cdb4ee11a'] = '2cd6bcc2160aa6ec048e5a5f7a0f73c8';

		drmConfig = {
			drm: {
				clearKeys: clearKeys,
			}
		}
		
		app.player.configure(drmConfig);

		player.load(mediaUrl).then(function() {
			console.log('The video has now been loaded!');
		}).catch(app.onPlayerError);
	};

	app.onPlayerError = function(event) {
	  console.error('Player error', event);
	}

	if (document.readyState == 'complete' ||
		document.readyState == 'interactive') {
		app.init();
	} else {
	  document.addEventListener('DOMContentLoaded', app.init);
	}
</script>



</body></html>
